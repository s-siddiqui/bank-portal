"use strict";(self.webpackChunkmf_transactions=self.webpackChunkmf_transactions||[]).push([[498],{929:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0;const i=n(1085),o=(r(n(7381)),n(7939));t.Text=({style:e,children:t,...n})=>(0,i.jsx)(o.Text,{style:[{fontSize:16,color:"#333"},e],...n,children:t})},931:function(e,t,n){var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&i(t,e,n[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.Shimmer=void 0;const l=n(1085),s=a(n(7381)),c=n(7939);t.Shimmer=({style:e})=>{const t=(0,s.useRef)(new c.Animated.Value(-100)).current;return(0,s.useEffect)(()=>{c.Animated.loop(c.Animated.timing(t,{toValue:300,duration:1e3,useNativeDriver:!0})).start()},[]),(0,l.jsx)(c.View,{style:[d.container,e],children:(0,l.jsx)(c.Animated.View,{style:[d.shimmerOverlay,{transform:[{translateX:t}]}]})})};const d=c.StyleSheet.create({container:{backgroundColor:"#e0e0e0",overflow:"hidden",position:"relative"},shimmerOverlay:{width:100,height:"100%",backgroundColor:"rgba(255,255,255,0.6)",position:"absolute"}})},1280:(e,t,n)=>{var r=n(9907);Object.defineProperty(t,"__esModule",{value:!0}),t.client=void 0;const i=n(2621);t.client=new i.ApolloClient({link:new i.HttpLink({uri:r.env.GRAPHQL_URL,fetch}),cache:new i.InMemoryCache}),console.log(r.env.GRAPHQL_URL,"GRAPHQL_URL")},1432:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionHistory=t.BackButton=void 0;const i=n(4848),o=(r(n(318)),n(2027)),a=n(1989),l=window.eventBus;t.BackButton=()=>(0,i.jsx)(o.TouchableOpacity,{style:s.backBtn,onPress:()=>window.history.back(),children:(0,i.jsx)(a.Text,{style:s.backText,children:"â† Back"})});t.TransactionHistory=({transactions:e,selectedId:t,onSelect:n})=>{if(0===e.length)return(0,i.jsx)(a.Text,{children:"No transactions available."});return(0,i.jsxs)(a.View,{style:s.table,children:[(0,i.jsxs)(a.View,{style:s.headerRow,children:[(0,i.jsx)(a.Text,{style:s.headerCell,children:"Txn Id"}),(0,i.jsx)(a.Text,{style:s.headerCell,children:"Type"}),(0,i.jsx)(a.Text,{style:s.headerCell,children:"Amount"}),(0,i.jsx)(a.Text,{style:s.headerCell,children:"Date"})]}),e.map(e=>(0,i.jsxs)(o.Pressable,{style:[s.row,e.id===t&&s.selectedRow],onPress:()=>{return t=e.id,n(t),void l.emit("navigate","/transactions");var t},children:[(0,i.jsx)(a.Text,{style:s.cell,children:e.id}),(0,i.jsx)(a.Text,{style:s.cell,children:e.type}),(0,i.jsxs)(a.Text,{style:s.cell,children:["$",e.amount]}),(0,i.jsx)(a.Text,{style:s.cell,children:new Date(e.date).toLocaleDateString()})]},e.id))]})};const s=o.StyleSheet.create({table:{flex:1,marginVertical:10},headerRow:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#ccc",paddingVertical:6},row:{flexDirection:"row",paddingVertical:8,borderBottomWidth:1,borderBottomColor:"#eee"},selectedRow:{backgroundColor:"#eef6ff"},headerCell:{flex:1,fontWeight:"bold",textAlign:"left"},cell:{flex:1,textAlign:"left"},backBtn:{backgroundColor:"#eee",padding:6,borderRadius:5,marginBottom:10,alignSelf:"flex-start"},backText:{fontSize:14}})},1470:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;const i=n(1085),o=(r(n(7381)),n(7939));t.Card=({children:e,style:t,...n})=>(0,i.jsx)(o.View,{style:[a.card,t],...n,children:e});const a=o.StyleSheet.create({card:{backgroundColor:"#fff",padding:15,borderRadius:10,shadowColor:"#000",shadowOpacity:.1,shadowOffset:{width:0,height:2},shadowRadius:6,elevation:2,marginBottom:10}})},1989:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2244),t),i(n(1470),t),i(n(929),t),i(n(6999),t),i(n(931),t)},2244:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;const i=n(1085),o=(r(n(7381)),n(7939));t.Button=({label:e,onPress:t,style:n})=>(0,i.jsx)(o.Pressable,{onPress:t,style:[a.button,n],children:(0,i.jsx)(o.Text,{style:a.label,children:e})});const a=o.StyleSheet.create({button:{backgroundColor:"#007bff",padding:10,borderRadius:6,alignItems:"center"},label:{color:"#fff",fontWeight:"bold"}})},4262:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(5074),t),i(n(9749),t),i(n(1432),t)},5074:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionDetailShimmer=t.TransactionHistoryShimmer=void 0;const i=n(4848),o=(r(n(318)),n(2027)),a=n(2027),l=n(1989);t.TransactionHistoryShimmer=()=>(0,i.jsxs)(o.View,{style:s.table,children:[(0,i.jsx)(o.View,{style:s.headerRow,children:[...Array(4)].map((e,t)=>(0,i.jsx)(l.Shimmer,{style:s.headerCellShimmer},t))}),[...Array(5)].map((e,t)=>(0,i.jsx)(o.View,{style:s.row,children:[...Array(4)].map((e,t)=>(0,i.jsx)(l.Shimmer,{style:s.cellShimmer},t))},t))]});t.TransactionDetailShimmer=()=>(0,i.jsxs)(o.View,{style:s.detailContainer,children:[(0,i.jsx)(l.Shimmer,{style:s.detailHeader}),[...Array(5)].map((e,t)=>(0,i.jsx)(l.Shimmer,{style:s.detailLine},t)),(0,i.jsx)(l.Shimmer,{style:s.buttonShimmer})]});const s=a.StyleSheet.create({table:{flex:1,marginVertical:10},headerRow:{flexDirection:"row",paddingVertical:6,gap:8},row:{flexDirection:"row",paddingVertical:8,gap:8},headerCellShimmer:{flex:1,height:14,borderRadius:4},cellShimmer:{flex:1,height:12,borderRadius:4},detailContainer:{padding:10,gap:10,marginTop:10},detailHeader:{width:200,height:20,borderRadius:6},detailLine:{width:"90%",height:14,borderRadius:4},buttonShimmer:{width:120,height:36,borderRadius:6,marginTop:12}})},6999:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const i=n(1085),o=(r(n(7381)),n(7939));t.View=({style:e,children:t,...n})=>(0,i.jsx)(o.View,{style:[{padding:10},e],...n,children:t})},7446:function(e,t,n){var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&i(t,e,n[a]);return o(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});const l=n(4848),s=a(n(318)),c=n(2621),d=n(2027),u=n(1989),h=n(4262),f=n(1280),y=n(8247),p=()=>{const{data:e,loading:t,error:n}=(0,c.useQuery)(y.GET_TRANSACTIONS),[r,i]=(0,s.useState)(null);if((0,s.useEffect)(()=>{const e=window.__lastSelectedTransactionId;e&&i(e);const t=e=>{console.log("ðŸŽ¯ Received transactionSelected:",e),window.__lastSelectedTransactionId=e,i(e)};return window.eventBus.on("transactionSelected",t),()=>{window.eventBus.off("transactionSelected",t)}},[]),n)return(0,l.jsx)(u.View,{children:(0,l.jsx)(u.Text,{children:"Error loading transactions"})});const o=e?.transactions||[],a=o?.find(e=>e.id===r)||null;return console.log(o,a,r,"txn"),(0,l.jsxs)(u.View,{style:m.container,children:[(0,l.jsx)(h.BackButton,{}),t?(0,l.jsx)(h.TransactionHistoryShimmer,{}):(0,l.jsx)(h.TransactionHistory,{transactions:o,selectedId:r,onSelect:i}),t?(0,l.jsx)(h.TransactionDetailShimmer,{}):(0,l.jsx)(h.TransactionDetail,{transaction:a})]})};t.default=()=>(0,l.jsx)(c.ApolloProvider,{client:f.client,children:(0,l.jsx)(p,{})});const m=d.StyleSheet.create({container:{flex:1,padding:10}})},8247:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GET_TRANSACTION_BY_ID=t.GET_TRANSACTIONS=void 0;const r=n(2621);t.GET_TRANSACTIONS=r.gql`
  query {
    transactions {
      id
      accountId
      type
      amount
      description
      date
    }
  }
`,t.GET_TRANSACTION_BY_ID=r.gql`
  query ($id: ID!) {
    transactions {
      id
      accountId
      type
      amount
      description
      date
    }
  }
`},9749:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionDetail=void 0;const i=n(4848),o=(r(n(318)),n(2027)),a=n(1989);t.TransactionDetail=({transaction:e})=>{if(!e)return(0,i.jsx)(a.Text,{style:l.empty,children:"Select a transaction to see details."});return(0,i.jsxs)(a.View,{style:l.container,children:[(0,i.jsx)(a.Text,{style:l.header,children:"Transaction Details"}),(0,i.jsxs)(a.Text,{children:["Transaction Id: ",e.id]}),(0,i.jsxs)(a.Text,{children:["Type: ",e.type]}),(0,i.jsxs)(a.Text,{children:["Amount: $",e.amount]}),(0,i.jsxs)(a.Text,{children:["Description: ",e.description]}),(0,i.jsxs)(a.Text,{children:["Date: ",new Date(e.date).toLocaleString()]}),"web"===o.Platform.OS?(0,i.jsx)(a.Button,{style:{width:"120px"},title:"Download CSV",label:"Download CSV",onPress:()=>{const t=`ID,Type,Amount,Description,Date\n${e.id},${e.type},${e.amount},${e.description},${e.date}`,n=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`transaction-${e.id}.csv`,i.click()}}):(0,i.jsx)(a.Button,{title:"Share",onPress:()=>{alert(`Sharing transaction: ${e.description}`)}})]})};const l=o.StyleSheet.create({container:{display:"flex",gap:10,flex:1,padding:10,marginTop:10},header:{fontSize:18,fontWeight:"bold",marginBottom:8},empty:{fontSize:14,marginVertical:10}})}}]);
//# sourceMappingURL=498.d4242569390d84c81609.js.map